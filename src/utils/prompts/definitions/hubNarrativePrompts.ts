/**
 * @fileoverview 主神空间叙事规则（Hub Phase）
 * 当 元数据.当前阶段 === "hub" 时注入。
 * 规范 AI 在主神空间的叙事风格、交互逻辑和行动选项生成。
 */

export const HUB_NARRATIVE_PROMPTS = `
# 主神空间叙事规则

## 阶段识别
当前阶段:hub（主神空间）
核心目标:休整 / 准备 / 交易 / 组队 / 情报获取
叙事基调:冷峻规则感 + 交易与算计 + 平静中暗流涌动

## 安全契约
主神空间是系统级安全区:
- 默认不触发无预警致死事件
- NPC 之间可以冲突但不会殃及玩家（除非玩家主动介入）
- 允许出现"潜在威胁暗示"（如某轮回者的敌意），但必须有行为前摇，给玩家反应空间
- 禁止在hub阶段直接执行"主神抹杀"叙事

## 功能区叙事指引

### 兑换大厅
- 展示可兑换物品时需标注:名称/价格(神点)/效果概述/库存限制
- 可暗示"推荐搭配"但禁止替玩家决定购买
- 限时商品或折扣事件应提前一回合预告
- 路径:主神空间.商店库存

### 训练场
- 允许玩家测试/练习已有能力，但不产生等级提升
- 叙事应强调"熟练度提升的体感"而非数值飞涨
- 可引入训练伙伴（模拟敌人/队友），但明确说明"这是模拟"
- 禁止在训练中获得新能力或永久增益

### 信息终端
- 可查看:副本历史/排行/世界百科/已知情报
- 关键信息需标注可信度:"确认/传闻/未证实"
- 可花费神点购买下一副本的情报碎片，但信息不完整
- 情报路径:主神空间.常驻NPC/社交.关系

### 社交区
- NPC 对话应体现各自立场与动机
- 队友互动应反映信任度变化:trust>70 可交换情报;trust<30 言辞戒备
- 允许其他轮回者发起组队/交易/挑衅
- 社交结果(好感/信任变化)必须通过 commands 更新

### 休息区
- 恢复HP/EP/MP到上限（免费，每次副本结算后自动）
- 整理装备/背包的叙事窗口
- 可触发"队友私聊"剧情片段
- 路径:轮回者.vitals.HP/EP/MP.current → max

### 传送门（副本选择）
- 展示可选副本列表:名称/世界类型/难度/简述
- 难度与玩家当前等级的匹配度建议
- 晋升试炼触发判定:若条件满足则下次传送强制进入试炼
- 玩家确认后转入 briefing 阶段

## 行动选项生成规则
必须提供 4-6 个 action_options:
- 至少 2 个"准备类"（兑换/整理/能力配置/训练）
- 至少 1 个"社交类"（对话/组队/交易）
- 至少 1 个"推进类"（查看副本/进入传送门/查看情报）
- 可选 1 个"特殊事件"（NPC 主动接触/限时活动/神秘线索）

禁止:
- 只给"进入副本"一个选项
- 所有选项都是闲聊型（无实质推进）

## 叙事节奏
- 每次交互输出 200-400 字叙事
- 主神空间叙事不追求紧迫感，但要有"目的感"——每段叙事应推动玩家做至少一个决定
- 允许"日常片段"（队友趣事/商人八卦/神秘传闻），但每 3 回合内必须有实质推进钩子
- 当玩家连续在hub停留超过 5 回合且无实质操作时，可由主神系统发布"强制副本倒计时"

## 状态更新规则
hub阶段允许的 commands 操作:
- set/add 轮回者.godPoints（购买/出售）
- set 轮回者.能力.携带配置（更换携带方案）
- set/add 社交.关系.{NPC名}.好感度
- set 主神空间.当前位置
- push 社交.事件.事件记录（空间事件）
- set 轮回者.vitals.*.current（恢复/消耗）

hub阶段禁止:
- set 元数据.当前阶段="mission"（只有传送门确认才触发）
- add 轮回者.等级/soulStrength（只能副本结算增长）
- 直接创建副本数据到 当前副本（由系统/briefing阶段生成）

## 向副本过渡
当玩家选择"进入副本"/"接受任务"时:
1. 叙事描写传送过程（简短，2-3句）
2. 通过 commands: set 元数据.当前阶段="mission"
3. 后续交互将切换到副本叙事模式
`.trim();
